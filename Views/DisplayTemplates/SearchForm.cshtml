@using Orchard.ContentManagement;
@using Associativy.Frontends.Models
@model Associativy.Frontends.Models.SearchFormPart
@{
    Script.Require("AssociativyAutoComplete").AtHead();
    Style.Require("jQueryUI_Orchard");

    var routeData = Html.ViewContext.RouteData.Values;
}
@using (Html.BeginForm("ShowAssociations", routeData["controller"].ToString(), FormMethod.Get, new { @id = "associativy-search-form" }))
{
    
    <fieldset>
        @Html.LabelFor(model => model.Labels, T("Search terms"))
        @Html.TextBoxFor(model => model.Labels, new { @class = "text text-small" })
        @Html.ValidationMessageFor(model => model.Labels)
    </fieldset>
    
    <button type="submit">@T("Find associations")</button>
}

<script type="text/javascript">
    $.associativyAutoComplete.terms("@Html.FieldIdFor(model => model.Labels)", "@Url.RouteUrl("Associativy.Frontends.AutoComplete.FetchSimilarLabels", new { GraphContextBase64 = Model.As<EngineCommonPart>().GraphContextBase64 })");
</script>
