@using Orchard.ContentManagement;
@using Associativy.Frontends.Models
@model Associativy.Frontends.Models.Pages.Frontends.AssociativyFrontendSearchFormPart
           
@{
    Script.Require("AssociativyFrontends_AutoComplete").AtHead();
    Style.Require("jQueryUI_Orchard");
}

@using (Html.BeginForm(null, null, FormMethod.Get, new { @id = "associativy-search-form", action = Url.Action("Associations", ViewContext.RouteData.Values) }))
{
    @Html.HiddenFor(m => m.IsPartialGraph)
    <fieldset>
        @Html.LabelFor(m => m.Labels, T("Search terms"))
        @Html.TextBoxFor(m => m.Labels, new { @class = "text textMedium" })
        @Html.ValidationMessageFor(m => m.Labels)
    </fieldset>
    
    <button type="submit">@T("Find associations")</button>
}

<script type="text/javascript">
$(document).ready(function() {
    $.associativy.autoComplete.labels("#@Html.FieldIdFor(m => m.Labels)", "@Url.RouteUrl("Associativy.Frontends.AutoComplete.FetchSimilarLabels", new { GraphName = Model.As<IEngineConfigurationAspect>().GraphContext.GraphName })");
});
</script>